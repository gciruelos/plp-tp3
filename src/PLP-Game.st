Object subclass: #MiniFluxxGame	instanceVariableNames: 'players turn currentGoal winner deck'	classVariableNames: ''	poolDictionaries: ''	category: 'PLP-Game'!!MiniFluxxGame methodsFor: 'initialization' stamp: 'GonzaloCiruelos 6/22/2017 04:31'!setGoal: newGoal	currentGoal := newGoal! !!MiniFluxxGame methodsFor: 'initialization' stamp: 'GonzaloCiruelos 6/22/2017 04:31'!setStrategy: aStrat forPlayer: aPlayer	(players detect: [ :p | p name == aPlayer ]) strategy: aStrat.! !!MiniFluxxGame methodsFor: 'as yet unclassified' stamp: 'GonzaloCiruelos 6/22/2017 04:34'!play1Turn	self currentPlayer		receive: (1 min: (deck size)) cardsFrom: deck;		play: self.	"Buscamos al ganador actual entre todos los jugadores."	currentGoal ifNotNil: [ winner := players detect: [ :p | currentGoal isMetBy: p table ] ifNone: nil ].	winner ifNil: [ self pass ].! !!MiniFluxxGame methodsFor: 'as yet unclassified'!pass	turn := turn + 1! !!MiniFluxxGame methodsFor: 'as yet unclassified'!currentPlayer	^ players atWrap: turn! !!MiniFluxxGame methodsFor: 'as yet unclassified'!winner	^ winner! !!MiniFluxxGame methodsFor: 'as yet unclassified'!deckSize	^ deck size! !!MiniFluxxGame methodsFor: 'as yet unclassified' stamp: 'GonzaloCiruelos 6/22/2017 04:34'!init: aDeck with: somePlayers with: aNumber	| enoughCards |	players := somePlayers collect: [ :p | MiniFluxxPlayer new: p ].	turn := 1.	winner := nil.	deck := aDeck.	enoughCards  := aNumber * players size <= aDeck size.  "Alcanzan las cartas?"	enoughCards		ifTrue: [ players do: [ :p | p receive: aNumber cardsFrom: deck ] ]  "Repartimos a cada jugador."! !!MiniFluxxGame methodsFor: 'as yet unclassified' stamp: 'GonzaloCiruelos 6/22/2017 04:33'!playGame   "La condicion de corte es que haya ganador, o que no haya cartas en el mazo y el jugador actual    no tenga mas cartas (por como es el juego, si al que le toca jugar no tiene mas cartas,  nadie    tiene mas cartas."	[ self winner isNil and: [ (self currentPlayer handSize > 0) or: [self deckSize > 0 ] ] ]		whileTrue: [ self play1Turn ]! !!MiniFluxxGame methodsFor: 'as yet unclassified'!goal	^ currentGoal! !!MiniFluxxGame methodsFor: 'as yet unclassified'!players	^ players! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!MiniFluxxGame class	instanceVariableNames: ''!!MiniFluxxGame class methodsFor: 'as yet unclassified'!withDeck: arg1 playerNames: arg2 cardsPerPlayer: arg3	^ super new init: arg1 with: arg2 with: arg3! !